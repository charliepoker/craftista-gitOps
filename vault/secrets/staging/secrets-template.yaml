# Vault Secrets Template for Staging Environment
# This file documents the required secrets structure for the staging environment
# Use this template to populate secrets in Vault at the specified paths

# Instructions:
# 1. Replace all placeholder values with actual secrets
# 2. Use the sync-secrets.sh script to populate Vault
# 3. Never commit actual secret values to Git
# 4. Staging secrets should be different from dev and production

---
# Frontend Service Secrets
# Path: secret/data/craftista/staging/frontend/
frontend:
  api-keys:
    session_secret: "REPLACE_WITH_RANDOM_SESSION_SECRET"
    jwt_secret: "REPLACE_WITH_JWT_SECRET"

  config:
    node_env: "staging"
    log_level: "info"
    port: "3000"

---
# Catalogue Service Secrets
# Path: secret/data/craftista/staging/catalogue/
catalogue:
  mongodb-credentials:
    username: "catalogue_user"
    password: "REPLACE_WITH_MONGODB_PASSWORD"
    database: "catalogue"

  mongodb-uri:
    connection_string: "mongodb://catalogue_user:REPLACE_WITH_MONGODB_PASSWORD@mongodb-staging.craftista.local:27017/catalogue?authSource=admin"

  config:
    flask_env: "staging"
    log_level: "INFO"
    data_source: "mongodb"

---
# Voting Service Secrets
# Path: secret/data/craftista/staging/voting/
voting:
  postgres-credentials:
    username: "voting_user"
    password: "REPLACE_WITH_POSTGRES_PASSWORD"
    database: "voting"

  postgres-uri:
    jdbc_url: "jdbc:postgresql://postgres-staging.craftista.local:5432/voting"
    connection_string: "postgresql://voting_user:REPLACE_WITH_POSTGRES_PASSWORD@postgres-staging.craftista.local:5432/voting"

  config:
    spring_profiles_active: "staging"
    log_level: "INFO"

---
# Recommendation Service Secrets
# Path: secret/data/craftista/staging/recommendation/
recommendation:
  redis-credentials:
    password: "REPLACE_WITH_REDIS_PASSWORD"

  redis-uri:
    connection_string: "redis://:REPLACE_WITH_REDIS_PASSWORD@redis-staging.craftista.local:6379/0"
    host: "redis-staging.craftista.local"
    port: "6379"

  config:
    environment: "staging"
    log_level: "info"

---
# Common Secrets (shared across services)
# Path: secret/data/craftista/staging/common/
common:
  registry:
    dockerhub_username: "REPLACE_WITH_DOCKERHUB_USERNAME"
    dockerhub_password: "REPLACE_WITH_DOCKERHUB_PASSWORD"

  monitoring:
    slack_webhook_url: "REPLACE_WITH_SLACK_WEBHOOK_URL"

  tls:
    cert: "REPLACE_WITH_TLS_CERT"
    key: "REPLACE_WITH_TLS_KEY"

---
# Database Connection Details
# These are reference values for documentation purposes
database_endpoints:
  mongodb:
    host: "mongodb-staging.craftista.local"
    port: 27017
    description: "MongoDB instance for catalogue service"

  postgresql:
    host: "postgres-staging.craftista.local"
    port: 5432
    description: "PostgreSQL instance for voting service"

  redis:
    host: "redis-staging.craftista.local"
    port: 6379
    description: "Redis instance for recommendation service"

---
# Notes:
# - All passwords should be at least 20 characters with mixed case, numbers, and symbols
# - Session secrets should be cryptographically random (use: openssl rand -base64 32)
# - JWT secrets should be cryptographically random (use: openssl rand -base64 64)
# - Database credentials should follow principle of least privilege
# - TLS certificates should be valid for *.staging.webdemoapp.com
# - Slack webhook URLs should be obtained from Slack workspace settings
# - Staging secrets MUST be different from dev and production
# - Consider using Vault's dynamic secrets for database credentials
