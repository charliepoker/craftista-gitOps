# GitHub Actions CI/CD Secrets Template
# This file documents the required secrets structure for GitHub Actions workflows
# Use this template to populate secrets in Vault at the specified paths

# Instructions:
# 1. Replace all placeholder values with actual secrets
# 2. Use the setup-github-actions-secrets.sh script to populate Vault
# 3. Never commit actual secret values to Git

---
# DockerHub Registry Credentials
# Path: secret/data/github-actions/dockerhub-credentials
dockerhub-credentials:
  username: "REPLACE_WITH_DOCKERHUB_USERNAME"
  password: "REPLACE_WITH_DOCKERHUB_ACCESS_TOKEN"
  registry: "docker.io"

  # Notes:
  # - Use DockerHub access token instead of password for better security
  # - Access token should have push permissions to your repositories
  # - Username should match your DockerHub account

---
# SonarQube Authentication Token
# Path: secret/data/github-actions/sonarqube-token
sonarqube-token:
  token: "REPLACE_WITH_SONARQUBE_TOKEN"
  url: "REPLACE_WITH_SONARQUBE_URL"
  organization: "craftista"

  # Notes:
  # - Token should have 'Execute Analysis' permission
  # - URL format: https://sonarqube.example.com
  # - Organization is optional for SonarQube Community Edition

---
# GitOps Repository Deploy Key
# Path: secret/data/github-actions/gitops-deploy-key
gitops-deploy-key:
  private_key: |
    -----BEGIN OPENSSH PRIVATE KEY-----
    REPLACE_WITH_SSH_PRIVATE_KEY_CONTENT
    -----END OPENSSH PRIVATE KEY-----
  public_key: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAI... github-actions@craftista"
  repository: "charliepoker/craftista-gitops"

  # Notes:
  # - Use ED25519 key type for better security
  # - Public key must be added to the craftista-gitops repository as a deploy key
  # - Deploy key must have write permissions
  # - Generate with: ssh-keygen -t ed25519 -C "github-actions@craftista" -f gitops-deploy-key

---
# Slack Webhook for CI/CD Notifications
# Path: secret/data/github-actions/slack-webhook-url
slack-webhook-url:
  webhook_url: "https://hooks.slack.com/services/REPLACE/WITH/WEBHOOK_URL"
  channel: "#ci-cd"
  username: "GitHub Actions"

  # Notes:
  # - Webhook URL obtained from Slack App configuration
  # - Channel should exist in your Slack workspace
  # - Username is the display name for bot messages

---
# Nexus Repository Credentials (Optional)
# Path: secret/data/github-actions/nexus-credentials
nexus-credentials:
  username: "REPLACE_WITH_NEXUS_USERNAME"
  password: "REPLACE_WITH_NEXUS_PASSWORD"
  url: "REPLACE_WITH_NEXUS_URL"

  # Notes:
  # - Only required if using Nexus for artifact storage
  # - URL format: https://nexus.example.com
  # - User should have deployment permissions

---
# Additional CI/CD Configuration
# These are reference values and configuration options
ci-cd-config:
  # Docker image naming convention
  image_naming:
    registry: "docker.io"
    namespace: "charliepoker"
    tag_format: "{service}-{environment}-{commit_sha}"

  # Build configuration
  build_config:
    parallel_jobs: 4
    timeout_minutes: 30
    retry_attempts: 3

  # Security scanning thresholds
  security_thresholds:
    sonarqube:
      quality_gate: "Sonar way"
      coverage_threshold: 80
      duplicated_lines_threshold: 3

    trivy:
      severity_threshold: "HIGH"
      ignore_unfixed: true
      timeout: "10m"

  # Notification settings
  notifications:
    on_success: true
    on_failure: true
    on_cancelled: false
    mention_on_failure: "@channel"

---
# Secret Generation Commands
# Use these commands to generate secure values

# Generate SSH key pair for GitOps deploy key:
# ssh-keygen -t ed25519 -C "github-actions@craftista" -f gitops-deploy-key -N ""

# Generate random password (24 characters):
# openssl rand -base64 24 | tr -d "=+/" | cut -c1-24

# Test Slack webhook:
# curl -X POST -H 'Content-type: application/json' \
#   --data '{"text":"Test message from GitHub Actions setup"}' \
#   YOUR_WEBHOOK_URL

---
# Security Notes:
# - All tokens should be rotated every 90 days
# - Use access tokens instead of passwords where possible
# - Monitor secret access through Vault audit logs
# - Never log or expose secret values in CI/CD output
# - Use GitHub's encrypted secrets as a fallback for critical secrets
# - Implement secret scanning in repositories to prevent accidental commits
